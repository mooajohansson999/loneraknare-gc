<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>GlobalConnect ‚Äì L√∂ner√§knare</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:linear-gradient(135deg,#eef2ff,#f5f3ff);min-height:100vh;padding:16px}
.wrap{max-width:680px;margin:0 auto}
h1{color:#4338ca;font-size:1.5rem;text-align:center}
.sub{color:#6b7280;font-size:.85rem;text-align:center;margin-top:4px;margin-bottom:12px}
.warn{background:#fffbeb;border:1px solid #fcd34d;border-radius:12px;padding:12px 16px;display:flex;gap:10px;align-items:flex-start;margin-bottom:14px}
.warn p{color:#92400e;font-size:.78rem;line-height:1.5}
.card{background:#fff;border-radius:16px;border:1px solid #f3f4f6;margin-bottom:14px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.06)}
.card-header{padding:12px 16px;font-size:.85rem;font-weight:600}
.card-header.indigo{background:#4338ca;color:#fff}
.card-header.purple{background:#7c3aed;color:#fff}
.row{display:flex;align-items:center;gap:10px;padding:10px 16px;border-bottom:1px solid #f9fafb}
.row:last-child{border-bottom:none}
.row-label{flex:1}
.row-label .name{font-size:.85rem;font-weight:500;color:#1f2937}
.row-label .meta{font-size:.74rem;color:#9ca3af;margin-top:2px;display:flex;flex-wrap:wrap;gap:3px}
input[type=number]{width:72px;border:1px solid #e5e7eb;border-radius:8px;padding:6px 8px;font-size:.85rem;text-align:center;outline:none}
input[type=number]:focus{border-color:#818cf8;box-shadow:0 0 0 2px #e0e7ff}
.amt{width:110px;text-align:right;font-size:.85rem;font-weight:600;color:#4338ca}
.tier-pill{display:inline-flex;padding:2px 7px;border-radius:20px;font-size:.72rem;background:#f3f4f6;color:#6b7280;margin:2px}
.tier-pill.active{background:#4338ca;color:#fff}
.gc-bonus-note{font-size:.74rem;color:#16a34a;margin-top:3px}
.toggle-btn{padding:8px 14px;border-radius:10px;font-size:.78rem;font-weight:600;cursor:pointer;border:1px solid;display:inline-flex;align-items:center;gap:6px;transition:.15s}
.green-off{border-color:#86efac;background:#fff;color:#15803d}
.green-on{border-color:#16a34a;background:#16a34a;color:#fff}
.dot{width:10px;height:10px;border-radius:50%;border:2px solid currentColor;display:inline-block}
.bonus-wrap{padding:12px 16px}
.bonus-wrap p{font-size:.74rem;color:#9ca3af;font-weight:600;margin-bottom:8px;text-transform:uppercase}
.sum-row{display:flex;justify-content:space-between;font-size:.85rem;padding:4px 0}
.sum-row .lbl{color:#6b7280}.sum-row .val{font-weight:500}
.sum-row .val.red{color:#ef4444}.sum-row .val.green{color:#16a34a}
.sum-total{display:flex;justify-content:space-between;align-items:center;padding-top:12px;margin-top:4px;border-top:1px solid #f3f4f6}
.sum-total .lbl{font-weight:700;color:#1f2937}.sum-total .val{font-size:1.2rem;font-weight:800;color:#4338ca}
.anger-wrap{padding:14px 16px}
.anger-wrap label{font-size:.85rem;font-weight:600;color:#374151;display:block;margin-bottom:8px}
.anger-inner{display:flex;align-items:center;gap:12px}
.anger-note{font-size:.82rem;color:#ef4444;font-weight:500}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useMemo}=React;
function fmt(n){return n.toLocaleString("sv-SE",{minimumFractionDigits:2,maximumFractionDigits:2})+" kr"}
function getTierRate(qty,tiers){let r=tiers[0].rate;for(const t of tiers){if(qty>=t.min)r=t.rate;}return r;}
function getGcBonus(qty,gt){let b=0;for(const t of gt){if(qty>=t.min)b=t.bonus;}return b;}

const CATEGORIES=[
  {id:"upsell",name:"Upsell",tiers:[{min:1,rate:600},{min:20,rate:700},{min:30,rate:900},{min:40,rate:1000},{min:50,rate:1100},{min:60,rate:1200}],gcGreenTiers:[{min:1,bonus:0},{min:20,bonus:50},{min:30,bonus:100},{min:40,bonus:150},{min:60,bonus:200}]},
  {id:"byggsalj",name:"Byggs√§lj",tiers:[{min:1,rate:500},{min:20,rate:600},{min:30,rate:800},{min:40,rate:900},{min:50,rate:1000},{min:60,rate:1100}],gcGreenTiers:[{min:1,bonus:0},{min:20,bonus:50},{min:30,bonus:100},{min:40,bonus:150},{min:60,bonus:200}]},
  {id:"nysalj",name:"Nys√§lj",tiers:[{min:1,rate:350},{min:20,rate:450},{min:30,rate:500},{min:40,rate:550},{min:50,rate:600},{min:60,rate:700}],gcGreenTiers:[{min:1,bonus:0},{min:20,bonus:50},{min:30,bonus:100},{min:40,bonus:150},{min:60,bonus:200}]},
  {id:"bundling",name:"Tj√§nstebundling (ej Telia)",flat:400},
];

function App(){
  const [sales,setSales]=useState({});
  const [anger,setAnger]=useState("");
  const [gcGreen,setGcGreen]=useState(false);
  function q(id){return parseInt(sales[id])||0;}
  function setSale(id,val){setSales(p=>({...p,[id]:val}));}

  const gross=useMemo(()=>CATEGORIES.reduce((s,cat)=>{
    if(cat.flat!==undefined)return s+q(cat.id)*cat.flat;
    const qty=q(cat.id);
    const rate=qty>0?getTierRate(qty,cat.tiers):0;
    const bonus=gcGreen&&qty>0?getGcBonus(qty,cat.gcGreenTiers):0;
    return s+qty*(rate+bonus);
  },0),[sales,gcGreen]);

  const angerPct=parseFloat(anger)||0;
  const angerDed=gross*(angerPct/100);
  const afterAnger=gross-angerDed;
  const holiday=afterAnger*0.12;
  const total=afterAnger+holiday;

  return(
    <div className="wrap">
      <h1>GlobalConnect</h1>
      <p className="sub">L√∂ner√§knare</p>
      <div className="warn"><span>‚ö†Ô∏è</span><p>Provisionen baseras p√• provisionstrappan per kategori. Den faktiska l√∂nen beror p√• vilken niv√• du n√•r inom varje kategori.</p></div>

      <div className="card">
        <div className="bonus-wrap">
          <p>Bonus ‚Äî klicka f√∂r att aktivera</p>
          <button className={"toggle-btn "+(gcGreen?"green-on":"green-off")} onClick={()=>setGcGreen(v=>!v)}>
            <span className="dot" style={gcGreen?{background:"#fff",borderColor:"#fff"}:{}}></span>üü¢ Gr√∂n kampanj bonus?
          </button>
        </div>
      </div>

      <div className="card">
        <div className="card-header indigo">Antal s√•lda per kategori</div>
        {CATEGORIES.map(cat=>{
          if(cat.flat!==undefined){
            return(
              <div className="row" key={cat.id}>
                <div className="row-label">
                  <div className="name">{cat.name}</div>
                  <div className="meta">Fast: {cat.flat} kr/st</div>
                </div>
                <input type="number" min="0" placeholder="0" value={sales[cat.id]||""} onChange={e=>setSale(cat.id,e.target.value)}/>
                <div className="amt">{fmt(q(cat.id)*cat.flat)}</div>
              </div>
            );
          }
          const qty=q(cat.id);
          const rate=qty>0?getTierRate(qty,cat.tiers):0;
          const bonus=gcGreen&&qty>0?getGcBonus(qty,cat.gcGreenTiers):0;
          return(
            <div className="row" key={cat.id}>
              <div className="row-label">
                <div className="name">{cat.name}</div>
                <div className="meta">
                  {cat.tiers.map((t,i)=>{const active=qty>=t.min&&(i===cat.tiers.length-1||qty<cat.tiers[i+1].min);return <span key={i} className={"tier-pill"+(active?" active":"")}>{t.min}+: {t.rate} kr</span>})}
                </div>
                {gcGreen&&bonus>0&&<div className="gc-bonus-note">üü¢ +{bonus} kr/st gr√∂n bonus</div>}
              </div>
              <input type="number" min="0" placeholder="0" value={sales[cat.id]||""} onChange={e=>setSale(cat.id,e.target.value)}/>
              <div className="amt">{fmt(qty*(rate+bonus))}</div>
            </div>
          );
        })}
      </div>

      <div className="card">
        <div className="anger-wrap">
          <label>√Öngerprocent (%)</label>
          <div className="anger-inner">
            <input type="number" min="0" max="100" step="0.1" placeholder="0.0" value={anger} onChange={e=>setAnger(e.target.value)} style={{width:"120px"}}/>
            {angerPct>0&&<span className="anger-note">‚àí{fmt(angerDed)}</span>}
          </div>
        </div>
      </div>

      <div className="card">
        <div className="card-header purple">Sammanst√§llning</div>
        <div style={{padding:"16px"}}>
          <div className="sum-row"><span className="lbl">Bruttoprovision</span><span className="val">{fmt(gross)}</span></div>
          {angerPct>0&&<div className="sum-row"><span className="lbl">√Öngeravdrag ({angerPct}%)</span><span className="val red">‚àí{fmt(angerDed)}</span></div>}
          <div className="sum-row"><span className="lbl">Provision efter √•nger</span><span className="val">{fmt(afterAnger)}</span></div>
          <div className="sum-row"><span className="lbl">Semesterers√§ttning (12%)</span><span className="val green">{fmt(holiday)}</span></div>
          <div className="sum-total"><span className="lbl">Uppskattad l√∂n</span><span className="val">{fmt(total)}</span></div>
        </div>
      </div>
    </div>
  );
}
ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>